<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pakistan Salary Tax Calculator 2025-2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .rainbow {
            height: 12px;
            background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
            background-size: 1400% 1400%;
            animation: rainbow 10s ease infinite;
        }
        .rainbow-glow {
            background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
            background-size: 1400% 1400%;
            animation: rainbow 10s ease infinite;
            color: white;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 0, 0, 0.5);
        }
        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen w-full p-4 sm:p-6">
    <div class="bg-white p-4 sm:p-6 md:p-8 rounded-lg shadow-lg w-full max-w-lg sm:max-w-xl md:max-w-2xl">
        <h1 class="text-xl sm:text-2xl md:text-3xl font-bold text-center mb-4 sm:mb-6">Pakistan Salary Tax Calculator 2025-2026</h1>
        <div class="flex justify-center mb-4 sm:mb-6">
            <button id="calcTaxBtn" class="px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base rainbow-glow rounded-l-lg hover:bg-blue-600 focus:outline-none active:bg-blue-700">Calculate Tax</button>
            <button id="calcSalaryBtn" class="px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base bg-gray-300 text-gray-800 rounded-r-lg hover:bg-gray-400 focus:outline-none">Calculate Salary</button>
        </div>
        <div class="rainbow mb-4 sm:mb-6"></div>
        <div id="calcTaxForm" class="space-y-4 sm:space-y-6">
            <div>
                <label for="salaryInput" class="block text-sm sm:text-base font-medium text-gray-700">Monthly Salary (PKR)</label>
                <input type="number" id="salaryInput" class="mt-1 block w-full p-2 sm:p-3 text-sm sm:text-base border rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="Enter monthly salary" min="0">
            </div>
            <div id="taxResult" class="text-center text-sm sm:text-base"></div>
        </div>
        <div id="calcSalaryForm" class="space-y-4 sm:space-y-6 hidden">
            <div>
                <label for="taxInput" class="block text-sm sm:text-base font-medium text-gray-700">Monthly Tax (PKR)</label>
                <input type="number" id="taxInput" class="mt-1 block w-full p-2 sm:p-3 text-sm sm:text-base border rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="Enter monthly tax" min="0">
            </div>
            <div id="salaryResult" class="text-center text-sm sm:text-base"></div>
        </div>
        <p class="text-xs sm:text-sm text-gray-500 text-center mt-4 sm:mt-6">REMEMBER IN YOUR PRAYERS - ZUBAIR AHMAD</p>
    </div>

    <script>
        // Tax slabs for 2025-2026 (annual)
        const taxSlabs = [
            { max: 600000, rate: 0, fixed: 0 },
            { max: 1200000, rate: 0.01, fixed: 0 },
            { max: 2200000, rate: 0.11, fixed: 6000 },
            { max: 3200000, rate: 0.23, fixed: 116000 },
            { max: 4100000, rate: 0.30, fixed: 346000 },
            { max: Infinity, rate: 0.35, fixed: 616000 }
        ];

        // Convert annual salary to monthly tax
        function calculateMonthlyTax(monthlySalary) {
            const annualSalary = monthlySalary * 12;
            let tax = 0;
            for (const slab of taxSlabs) {
                if (annualSalary <= slab.max) {
                    tax = slab.fixed + (slab.rate * (annualSalary - (slab.max === Infinity ? 4100000 : taxSlabs[taxSlabs.indexOf(slab) - 1]?.max || 600000)));
                    break;
                }
            }
            return tax / 12;
        }

        // Estimate monthly salary from monthly tax (using binary search for approximation)
        function calculateMonthlySalary(monthlyTax) {
            const targetAnnualTax = monthlyTax * 12;
            let low = 0, high = 10000000; // Reasonable salary range
            let estimatedSalary = 0;
            const precision = 0.01;

            while (low <= high) {
                const mid = (low + high) / 2;
                const midTax = calculateMonthlyTax(mid);
                if (Math.abs(midTax - monthlyTax) < precision) {
                    estimatedSalary = mid;
                    break;
                } else if (midTax < monthlyTax) {
                    low = mid + 0.01;
                } else {
                    high = mid - 0.01;
                }
            }

            return estimatedSalary;
        }

        // DOM elements
        const calcTaxBtn = document.getElementById('calcTaxBtn');
        const calcSalaryBtn = document.getElementById('calcSalaryBtn');
        const calcTaxForm = document.getElementById('calcTaxForm');
        const calcSalaryForm = document.getElementById('calcSalaryForm');
        const salaryInput = document.getElementById('salaryInput');
        const taxInput = document.getElementById('taxInput');
        const taxResult = document.getElementById('taxResult');
        const salaryResult = document.getElementById('salaryResult');

        // Toggle between forms
        calcTaxBtn.addEventListener('click', () => {
            calcTaxForm.classList.remove('hidden');
            calcSalaryForm.classList.add('hidden');
            calcTaxBtn.classList.add('rainbow-glow');
            calcTaxBtn.classList.remove('bg-gray-300', 'text-gray-800');
            calcSalaryBtn.classList.add('bg-gray-300', 'text-gray-800');
            calcSalaryBtn.classList.remove('rainbow-glow');
            salaryInput.value = '';
            taxResult.innerHTML = '';
        });

        calcSalaryBtn.addEventListener('click', () => {
            calcSalaryForm.classList.remove('hidden');
            calcTaxForm.classList.add('hidden');
            calcSalaryBtn.classList.add('bg-blue-500', 'text-white', 'active:bg-blue-700');
            calcSalaryBtn.classList.remove('bg-gray-300', 'text-gray-800', 'rainbow-glow');
            calcTaxBtn.classList.add('bg-gray-300', 'text-gray-800');
            calcTaxBtn.classList.remove('rainbow-glow');
            taxInput.value = '';
            salaryResult.innerHTML = '';
        });

        // Calculate tax on salary input
        salaryInput.addEventListener('input', () => {
            const salary = parseFloat(salaryInput.value) || 0;
            if (salary < 0) {
                taxResult.innerHTML = '<p class="text-red-500">Please enter a valid salary.</p>';
                return;
            }
            const monthlyTax = calculateMonthlyTax(salary).toFixed(2);
            const netSalary = (salary - monthlyTax).toFixed(2);
            taxResult.innerHTML = `
                <p class="text-green-600">Monthly Tax: PKR ${monthlyTax}</p>
                <p class="text-blue-600">Net Monthly Salary: PKR ${netSalary}</p>
            `;
        });

        // Calculate salary from tax input
        taxInput.addEventListener('input', () => {
            const tax = parseFloat(taxInput.value) || 0;
            if (tax < 0) {
                salaryResult.innerHTML = '<p class="text-red-500">Please enter a valid tax amount.</p>';
                return;
            }
            const estimatedSalary = calculateMonthlySalary(tax).toFixed(2);
            salaryResult.innerHTML = `
                <p class="text-blue-600">Estimated Monthly Salary: PKR ${estimatedSalary}</p>
            `;
        });
    </script>
</body>
</html>